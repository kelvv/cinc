"use strict";function fetch(e,t){return new Promise(function(o,a){var n={};if(window.XMLHttpRequest?n=new window.XMLHttpRequest:window.ActiveXObject&&(n=new window.ActiveXObject("Microsoft.XMLHTTP")),null!=n){if(n.onreadystatechange=function(){4===n.readyState&&(200===n.status?o(JSON.parse(n.response)):a("Problem retrieving XML data"))},n.open(t.method,e,!0),void 0!==t.headers)for(var r in t.headers)n.setRequestHeader(r,t.headers[r]);n.send(t.body)}else a("Your browser does not support XMLHTTP.")})}for(var panels=document.getElementsByClassName("cinc-postPanel"),_loop=function(e){var t=panels[e],o=["user-id","data-key","data-title","data-url","isReadOnly"];o.forEach(function(e){if(!Object.prototype.hasOwnProperty.call(t.attributes,e))throw Error("缺少 "+e+" 属性")});var a=t.attributes["user-id"].nodeValue,n="userId="+a+"&&postId="+t.attributes["data-key"].nodeValue+"&&postTitle="+t.attributes["data-title"].nodeValue+"&&postUrl="+t.attributes["data-url"].nodeValue+"&&domain="+document.domain,r=Boolean(t.attributes.isReadOnly.nodeValue),i="http://cinc.leanapp.cn/1.1/functions/";i+=r.equals("true")?"getPostRead":"incPostRead",fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-AVOSCloud-Application-Id":"GfIwMv2BxjSrE7IWjUDDjuLY-gzGzoHsz","X-AVOSCloud-Application-Key":"2Yxh385fxLsI1LqyxwFnJjWa"},body:n}).then(function(e){var o=document.createElement("a");o.textContent="阅读 "+(e.result||0),t.appendChild(o)},function(e){throw Error(e)})},i=0;i<panels.length;i++)_loop(i);