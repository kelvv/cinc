"use strict";function fetch(e,t){return new Promise(function(o,n){var a={};if(window.XMLHttpRequest?a=new window.XMLHttpRequest:window.ActiveXObject&&(a=new window.ActiveXObject("Microsoft.XMLHTTP")),null!=a){if(a.onreadystatechange=function(){4===a.readyState&&(200===a.status?o(JSON.parse(a.response)):n("Problem retrieving XML data"))},a.open(t.method,e,!0),void 0!==t.headers)for(var r in t.headers)a.setRequestHeader(r,t.headers[r]);a.send(t.body)}else n("Your browser does not support XMLHTTP.")})}for(var panels=document.getElementsByClassName("cinc-postPanel"),_loop=function(e){var t=panels[e],o=["user-id","data-key","data-title","data-url","isReadOnly"];o.forEach(function(e){if(!Object.prototype.hasOwnProperty.call(t.attributes,e))throw Error("缺少 "+e+" 属性")});var n=t.attributes["user-id"].nodeValue,a="userId="+n+"&&postId="+t.attributes["data-key"].nodeValue+"&&postTitle="+t.attributes["data-title"].nodeValue+"&&postUrl="+t.attributes["data-url"].nodeValue+"&&domain="+document.domain,r=Boolean(t.attributes.isReadOnly.nodeValue),i="http://cinc.leanapp.cn/1.1/functions/";i+=r?"getPostRead":"incPostRead",fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-AVOSCloud-Application-Id":"GfIwMv2BxjSrE7IWjUDDjuLY-gzGzoHsz","X-AVOSCloud-Application-Key":"2Yxh385fxLsI1LqyxwFnJjWa"},body:a}).then(function(e){var o=document.createElement("a");o.textContent="阅读 "+(e.result||0),t.appendChild(o)},function(e){throw Error(e)})},i=0;i<panels.length;i++)_loop(i);